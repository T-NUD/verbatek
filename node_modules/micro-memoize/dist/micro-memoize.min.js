!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.memoize={})}(this,function(e){"use strict";var n=function(e){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r];return n},r=function(e){var n=function(e){return function(n,r){if(n.length!==r.length)return!1;for(var t=0;t<n.length;t++)if(!e(n[t],r[t]))return!1;return!0}}(e);return function(e,r){for(var t=0;t<e.length;t++)if(n(e[t],r))return t;return-1}},t=function(e){return function(n){var r=e(n);return Array.isArray(r)?r:[r]}},o=function(e,n){return e===n||e!=e&&n!=n},i=function(e,n,r){},u=function(e,n,r){for(var t=r;t--;)e[t+1]=e[t];e[0]=n},a=function(e,n,t){var o=e.keys[0];e.values[0]=e.values[0].then(function(r){return n.onCacheHit(e,n,t),n.onCacheChange(e,n,t),r}).catch(function(t){var i=r(n.isEqual)(e.keys,o);throw~i&&(e.keys.splice(i,1),e.values.splice(i,1)),t})};e.default=function(e,c){if(e.isMemoized)return e;var f=c||{},s=f.isEqual,l=void 0===s?o:s,h=f.isPromise,v=void 0!==h&&h,d=f.maxSize,g=void 0===d?1:d,p=f.onCacheAdd,y=void 0===p?i:p,m=f.onCacheChange,C=void 0===m?i:m,b=f.onCacheHit,k=void 0===b?i:b,x=f.transformKey,z=function(e,n){var r={};for(var t in e)n.indexOf(t)>=0||Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r}(f,["isEqual","isPromise","maxSize","onCacheAdd","onCacheChange","onCacheHit","transformKey"]),A=Object.assign({},z,{isEqual:l,isPromise:v,maxSize:g,onCacheAdd:y,onCacheChange:C,onCacheHit:k,transformKey:x}),O=r(l),P=x?t(x):null,j={keys:[],values:[]},q=j.keys,E=j.values;function H(){var r=P?P(n(arguments)):arguments,t=O(q,r);return~t?(k(j,A,H),t&&(u(q,q[t],t),u(E,E[t],t),C(j,A,H))):(q.length>=g&&(q.pop(),E.pop()),u(q,P?r:n(r),q.length),u(E,e.apply(this,arguments),E.length),v&&a(j,A,H),y(j,A,H),C(j,A,H)),E[0]}return Object.defineProperties(H,{cache:{configurable:!0,get:function(){return j}},cacheSnapshot:{configurable:!0,get:function(){return{keys:n(j.keys),values:n(j.values)}}},isMemoized:{configurable:!0,get:function(){return!0}},options:{configurable:!0,get:function(){return A}}}),H},Object.defineProperty(e,"__esModule",{value:!0})});
