{"version":3,"file":"fast-equals.js","sources":["../src/constants.js","../src/utils.js","../src/comparator.js","../src/index.js"],"sourcesContent":["/**\n * @constant {boolean} HAS_MAP_SUPPORT\n */\nexport const HAS_MAP_SUPPORT = typeof Map === 'function';\n\n/**\n * @constant {boolean} HAS_SET_SUPPORT\n */\nexport const HAS_SET_SUPPORT = typeof Set === 'function';\n\n/**\n * @constant {boolean} HAS_WEAKSET_SUPPORT\n */\nexport const HAS_WEAKSET_SUPPORT = typeof WeakSet === 'function';\n","// constants\nimport {HAS_WEAKSET_SUPPORT} from './constants';\n\nconst keys = Object.keys;\n\n/**\n * @function addObjectToCache\n *\n * @description\n * add object to cache if it is indeed an object\n *\n * @param {any} object the object to potentially add to the cache\n * @param {Object|WeakSet} cache the cache to add to\n * @returns {void}\n */\nexport const addObjectToCache = (object, cache) => object && typeof object === 'object' && cache.add(object);\n\n/**\n * @function hasKey\n *\n * @description\n * does the array of keys include the key passed\n *\n * @param {Array<string>} keys the keys to check in\n * @param {string} key the key to locate\n * @returns {boolean} does the key exist in the keys\n */\nexport const hasKey = (keys, key) => {\n  for (let index = 0; index < keys.length; index++) {\n    if (keys[index] === key) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\n/**\n * @function sameValueZeroEqual\n *\n * @description\n * are the objects passed strictly equal or both NaN\n *\n * @param {any} objectA the object to compare against\n * @param {any} objectB the object to test\n * @returns {boolean} are the objects equal by the SameValueZero principle\n */\nexport const sameValueZeroEqual = (objectA, objectB) =>\n  objectA === objectB || (objectA !== objectA && objectB !== objectB);\n\n/**\n * @function isPlainObject\n *\n * @description\n * is the object a plain object\n *\n * @param {any} object the object to test\n * @returns {boolean} is the object a plain object\n */\nexport const isPlainObject = (object) => object.constructor === Object;\n\n/**\n * @function isPromiseLike\n *\n * @description\n * is the object promise-like (thenable)\n *\n * @param {any} object the object to test\n * @returns {boolean} is the object promise-like\n */\nexport const isPromiseLike = (object) => typeof object.then === 'function';\n\n/**\n * @function isReactElement\n *\n * @description\n * is the object passed a react element\n *\n * @param {any} object the object to test\n * @returns {boolean} is the object a react element\n */\nexport const isReactElement = (object) => !!(object.$$typeof && object._store);\n\n/**\n * @function getNewCache\n *\n * @description\n * get a new cache object to prevent circular references\n *\n * @returns {Object|Weakset} the new cache object\n */\nexport const getNewCache = () =>\n  HAS_WEAKSET_SUPPORT\n    ? new WeakSet()\n    : Object.create({\n      _values: [],\n      add(value) {\n        this._values.push(value);\n      },\n      has(value) {\n        return !!~this._values.indexOf(value);\n      }\n    });\n\n/**\n * @function createCircularEqual\n *\n * @description\n * create a custom isEqual handler specific to circular objects\n *\n * @param {funtion} [isEqual] the isEqual comparator to use instead of isDeepEqual\n * @returns {function(any, any): boolean}\n */\nexport const createCircularEqual = (isEqual) => (isDeepEqual) => {\n  const comparator = isEqual || isDeepEqual;\n\n  return (objectA, objectB, cache = getNewCache()) => {\n    const cacheHasA = cache.has(objectA);\n    const cacheHasB = cache.has(objectB);\n\n    if (cacheHasA || cacheHasB) {\n      return cacheHasA && cacheHasB;\n    }\n\n    addObjectToCache(objectA, cache);\n    addObjectToCache(objectB, cache);\n\n    return comparator(objectA, objectB, cache);\n  };\n};\n\n/**\n * @function toPairs\n *\n * @param {Map|Set} iterable the iterable to convert to [key, value] pairs (entries)\n * @returns {{keys: Array<*>, values: Array<*>}} the [key, value] pairs\n */\nexport const toPairs = (iterable) => {\n  const pairs = {keys: new Array(iterable.size), values: new Array(iterable.size)};\n\n  let index = 0;\n\n  iterable.forEach((value, key) => {\n    pairs.keys[index] = key;\n    pairs.values[index++] = value;\n  });\n\n  return pairs;\n};\n\n/**\n * @function areArraysEqual\n *\n * @description\n * are the arrays equal in value\n *\n * @param {Array<any>} arrayA the array to test\n * @param {Array<any>} arrayB the array to test against\n * @param {function} isEqual the comparator to determine equality\n * @param {any} meta the meta object to pass through\n * @returns {boolean} are the arrays equal\n */\nexport const areArraysEqual = (arrayA, arrayB, isEqual, meta) => {\n  if (arrayA.length !== arrayB.length) {\n    return false;\n  }\n\n  for (let index = 0; index < arrayA.length; index++) {\n    if (!isEqual(arrayA[index], arrayB[index], meta)) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\nexport const createAreIterablesEqual = (shouldCompareKeys) => {\n  /**\n   * @function areIterablesEqual\n   *\n   * @description\n   * determine if the iterables are equivalent in value\n   *\n   * @param {Array<Array<any>>} pairsA the pairs to test\n   * @param {Array<Array<any>>} pairsB the pairs to test against\n   * @param {function} isEqual the comparator to determine equality\n   * @param {any} meta the cache possibly being used\n   * @returns {boolean} are the objects equal in value\n   */\n  const areIterablesEqual = shouldCompareKeys\n    ? (pairsA, pairsB, isEqual, meta) =>\n      isEqual(pairsA.keys, pairsB.keys) && isEqual(pairsA.values, pairsB.values, meta)\n    : (pairsA, pairsB, isEqual, meta) => isEqual(pairsA.values, pairsB.values, meta);\n\n  return (iterableA, iterableB, isEqual, meta) =>\n    iterableA.size === iterableB.size && areIterablesEqual(toPairs(iterableA), toPairs(iterableB), isEqual, meta);\n};\n\n/**\n * @function areArraysEqual\n *\n * @description\n * are the objects equal in value\n *\n * @param {Array<any>} objectA the object to test\n * @param {Array<any>} objectB the object to test against\n * @param {function} isEqual the comparator to determine equality\n * @param {any} meta the meta object to pass through\n * @returns {boolean} are the objects equal\n */\nexport const areObjectsEqual = (objectA, objectB, isEqual, meta) => {\n  const keysA = keys(objectA);\n  const keysB = keys(objectB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  let key;\n\n  for (let index = 0; index < keysA.length; index++) {\n    key = keysA[index];\n\n    if (!hasKey(keysB, key)) {\n      return false;\n    }\n\n    // if a react element, ignore the \"_owner\" key because its not necessary for equality comparisons\n    if (key === '_owner' && isReactElement(objectA) && isReactElement(objectB)) {\n      continue;\n    }\n\n    if (!isEqual(objectA[key], objectB[key], meta)) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\n/**\n * @function areRegExpsEqual\n *\n * @description\n * are the regExps equal in value\n *\n * @param {RegExp} regExpA the regExp to test\n * @param {RegExp} regExpB the regExp to test agains\n * @returns {boolean} are the regExps equal\n */\nexport const areRegExpsEqual = (regExpA, regExpB) =>\n  regExpA.source === regExpB.source &&\n  regExpA.global === regExpB.global &&\n  regExpA.ignoreCase === regExpB.ignoreCase &&\n  regExpA.multiline === regExpB.multiline &&\n  regExpA.unicode === regExpB.unicode &&\n  regExpA.sticky === regExpB.sticky &&\n  regExpA.lastIndex === regExpB.lastIndex;\n","// constants\nimport {HAS_MAP_SUPPORT, HAS_SET_SUPPORT} from './constants';\n\n// utils\nimport {\n  areArraysEqual,\n  areObjectsEqual,\n  areRegExpsEqual,\n  createAreIterablesEqual,\n  isPlainObject,\n  isPromiseLike,\n  isReactElement,\n  sameValueZeroEqual\n} from './utils';\n\nconst isArray = Array.isArray;\n\nconst areMapsEqual = createAreIterablesEqual(true);\nconst areSetsEqual = createAreIterablesEqual(false);\n\nconst createComparator = (createIsEqual) => {\n  // eslint-disable-next-line no-use-before-define\n  const isEqual = typeof createIsEqual === 'function' ? createIsEqual(comparator) : comparator;\n\n  /**\n   * @function comparator\n   *\n   * @description\n   * compare the value of the two objects and return true if they are equivalent in values\n   *\n   * @param {any} objectA the object to test against\n   * @param {any} objectB the object to test\n   * @param {any} [meta] an optional meta object that is passed through to all equality test calls\n   * @returns {boolean} are objectA and objectB equivalent in value\n   */\n  function comparator(objectA, objectB, meta) {\n    if (sameValueZeroEqual(objectA, objectB)) {\n      return true;\n    }\n\n    const typeOfA = typeof objectA;\n\n    if (typeOfA !== typeof objectB || typeOfA !== 'object' || !objectA || !objectB) {\n      return false;\n    }\n\n    if (isPlainObject(objectA) && isPlainObject(objectB)) {\n      return areObjectsEqual(objectA, objectB, isEqual, meta);\n    }\n\n    const arrayA = isArray(objectA);\n    const arrayB = isArray(objectB);\n\n    if (arrayA || arrayB) {\n      return arrayA === arrayB && areArraysEqual(objectA, objectB, isEqual, meta);\n    }\n\n    const dateA = objectA instanceof Date;\n    const dateB = objectB instanceof Date;\n\n    if (dateA || dateB) {\n      return dateA === dateB && sameValueZeroEqual(objectA.getTime(), objectB.getTime());\n    }\n\n    const regexpA = objectA instanceof RegExp;\n    const regexpB = objectB instanceof RegExp;\n\n    if (regexpA || regexpB) {\n      return regexpA === regexpB && areRegExpsEqual(objectA, objectB);\n    }\n\n    if (isPromiseLike(objectA) || isPromiseLike(objectB)) {\n      return objectA === objectB;\n    }\n\n    if (HAS_MAP_SUPPORT) {\n      const mapA = objectA instanceof Map;\n      const mapB = objectB instanceof Map;\n\n      if (mapA || mapB) {\n        return mapA === mapB && areMapsEqual(objectA, objectB, comparator, meta);\n      }\n    }\n\n    if (HAS_SET_SUPPORT) {\n      const setA = objectA instanceof Set;\n      const setB = objectB instanceof Set;\n\n      if (setA || setB) {\n        return setA === setB && areSetsEqual(objectA, objectB, comparator, meta);\n      }\n    }\n\n    return areObjectsEqual(objectA, objectB, isEqual, meta);\n  }\n\n  return comparator;\n};\n\nexport default createComparator;\n","// comparator\nimport createCustomEqual from './comparator';\n\n// utils\nimport {createCircularEqual, sameValueZeroEqual} from './utils';\n\nexport {createCustomEqual, sameValueZeroEqual};\n\nexport const circularDeepEqual = createCustomEqual(createCircularEqual());\nexport const circularShallowEqual = createCustomEqual(createCircularEqual(sameValueZeroEqual));\nexport const deepEqual = createCustomEqual();\nexport const shallowEqual = createCustomEqual(() => sameValueZeroEqual);\n\nexport default {\n  circularDeep: circularDeepEqual,\n  circularShallow: circularShallowEqual,\n  createCustom: createCustomEqual,\n  deep: deepEqual,\n  sameValueZero: sameValueZeroEqual,\n  shallow: shallowEqual\n};\n"],"names":["HAS_MAP_SUPPORT","Map","HAS_SET_SUPPORT","Set","HAS_WEAKSET_SUPPORT","WeakSet","keys","Object","addObjectToCache","object","cache","add","hasKey","key","index","length","sameValueZeroEqual","objectA","objectB","isPlainObject","constructor","isPromiseLike","then","isReactElement","$$typeof","_store","getNewCache","create","_values","value","push","has","indexOf","createCircularEqual","isEqual","isDeepEqual","comparator","cacheHasA","cacheHasB","toPairs","iterable","pairs","Array","size","values","forEach","areArraysEqual","arrayA","arrayB","meta","createAreIterablesEqual","shouldCompareKeys","areIterablesEqual","pairsA","pairsB","iterableA","iterableB","areObjectsEqual","keysA","keysB","areRegExpsEqual","regExpA","regExpB","source","global","ignoreCase","multiline","unicode","sticky","lastIndex","isArray","areMapsEqual","areSetsEqual","createComparator","createIsEqual","typeOfA","dateA","Date","dateB","getTime","regexpA","RegExp","regexpB","mapA","mapB","setA","setB","circularDeepEqual","createCustomEqual","circularShallowEqual","deepEqual","shallowEqual","circularDeep","circularShallow","createCustom","deep","sameValueZero","shallow"],"mappings":"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"}